Плагин MultiVideos

Плагин является доработанным MultiPhotos. Пользователь может указать ссылку на видео (youtube, rutube, vimeo), картинку превью и описание; при этом если не указывать превью вручную, то есть возможность вставить его автоматически, картинка будет скачана с видеохостинга и сохранена в отдельную папку при сохранении документа. Все это хранится в одном tv-параметре в формате json.
Для разбора ссылок и загрузки картинок с видеохостингов используется класс от Bezumkin'а: http://bezumkin.ru/sections/php/441/.

Параметры плагина

TV Ids — id tv-параметра, в котором хранится галерея. Если их несколько, то перечисляем через запятую
Template, Role — id шаблонов страниц (обязательно) и ролей для которых отрабатывает плагин (можно не указывать)
Preview: width, Preview: height — размеры превью в админке
Thumbs folder — относительный путь к папке, в которую будут сохраняться превью, выдаваемые видеохостингом
Force download — если «Нет», то превью скачивается только при отсутствии картинки в папке

Сниппет MultiVideos

Как и плагин, происходит от аналогичного сниппета MultiPhotos. Предназначен для вывода tv, в котором хранится галерея.

Параметры сниппета
&tvname — имя tv-параметра
&id — id страницы с галереей, если не текущая
&fid — номер элемента (0 — первый), если нужно вывести один элемент
&random — 1, если нужно вывести в случайном порядке
&limit — количество выводимых элементов
&outerTpl — имя чанка с шаблоном для вывода галереи, должен содержать плейсхолдер [+videos+]
&rowTpl — имя чанка с шаблоном для вывода элемента, доступны плейсхолдеры [+video+] (ссылка на видео),[+thumb+] (относительная ссылка на картинку),[+title+] (название), [+embed+] (ссылка для встраивания), [+num+] (номер элемента, 0 — первый)
&pagination — 1, если нужен постраничный вывод
&display — количество элементов на странице
&reverse - 1, если нужно выводить элементы по убыванию; можно использовать вместе с limit, чтобы вывести последние добавленные видео
Сниппет getVideo

Пригодится, если на странице одно видео, ссылка на которое хранится в TV-параметре типа text.
Имеет два основных параметра: &link — ссылка на видео, &action — определяет, что должен вернуть сниппет. Если &action=`embed` (по умолчанию), то сниппет вернет ссылку для встраивания; если &action=`thumb`, сниппет вернет относительный URL превью или картинки «изображение не найдено».
Дополниетельные параметры: &thumbsUrl — относительный путь к папке для хранения превью (по умолчанию assets/images/video/), &emptyImage — относительный путь к картинке «изображение не найдено» (по умолчанию assets/snippets/phpthumb/noimage.png), &forceDownload — см. параметры плагина (по умолчанию false).

Изменения
1.0.2
- исправлена работа параметра limit;
- добавлен параметр reverse;
1.0.1
- исправлен сниппет getVideo;